services:
  masa-node:
    # Remove network_mode: "host" for macOS compatibility
    build: .  # For development
    # image: masaengineering/oracle:main  # Uncomment this and comment 'build' for production
    environment:
      ENV: "sepolia"
      RPC_URL: "https://sepolia.infura.io/v3/YOUR_INFURA_KEY"
      TWITTER_SCRAPER: "true"
      TWITTER_ACCOUNTS: "${TWITTER_ACCOUNTS}"  # Format: username1:password1,username2:password2
      USER_AGENTS: "${USER_AGENTS}"
      LOG_LEVEL: "debug"  # Add debug logging
      API_ENABLED: "true"  # Add this
      API_LISTEN_ADDRESS: "0.0.0.0:8080"  # Add this
    ports:
      - "8080:8080"
      - "4001:4001/udp"  # Add P2P port
    volumes:
      - ./.masa:/home/masa/.masa
      - ./.env:/home/masa/.env
    command: [
      "--masaDir", "/home/masa/.masa",
      "--twitterScraper",
      "--env", "sepolia",
      "--api-enabled=true",  # Change this format
      "--api-port", "0.0.0.0:8080",
      "--logLevel", "debug",
      "--debug",
      "--tcp=false",
      "--udp=false"
    ]
    restart: always

# Remove the named volume since we're using bind mounts

